<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GitHub Copilot Quiz ‚Äì One-at-a-Time</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="quizSetupBlock">
  <h3>Check your knowledge</h3>
  <div><b>Note:</b> please select shuffle option before loading quiz</div>
  <table border="0">
    <tr>
      <th><label><input type="checkbox" id="shuffleToggle"> Shuffle questions</label></th>
      <th><label><input type="checkbox" id="shuffleAnswersToggle"> Shuffle answers</label></th>
    </tr>
  </table>

  <div style="margin-top:10px;">
    <label for="quizFileSelect">Choose quiz from project:</label>
    <select id="quizFileSelect">
      <option value="quizzes/GH-900.txt">GH-900.txt</option>
      <option value="quizzes/GH-300.txt">GH-300.txt</option>
      <option value="quizzes/GH-000.txt">extra.txt</option>
    </select>
    <button id="loadQuizFileBtn">Load</button> or
    <input type="file" id="fileInput" accept=".txt" title="Upload a Quiz File (.txt)">
  </div>

  <div style="display:flex; gap:20px; align-items:center; margin-top:10px;">
    <label><input type="checkbox" id="voiceToggle"> Enable Voice Recognition</label>
    <label><input type="checkbox" id="autoReadToggle"> Enable Auto Reading</label>
  </div>

  <button id="voiceBtn" style="margin-top:10px;">üé§ Answer by Voice</button>
</div>

<div class="nav-buttons" style="margin-top:20px;">
  <button id="prevBtn">Previous</button>
  <button id="nextBtn">Next</button>
</div>

<div id="quizContainer" style="margin-top:20px;"></div>

<div class="nav-buttons" style="margin-top:20px;">
  <button id="finishQuizBtn">Finish Quiz</button>
  <button id="restart">Restart Quiz</button>
</div>

<div id="finalScore" style="margin-top:10px;"></div>

<div id="quizSummary" style="margin-top:20px; display: none;">
  <details open>
    <summary>üßæ Summary:</summary>
    <ul id="summaryList" class="summary-columns"></ul>
  </details>
</div>

<div id="voiceOutput" style="margin-top:1em; font-style: italic;"></div>

<!-- Modular JS Files -->
<script type="module">
  import { QuizEngine } from 'QuizEngine.js';
  import { FileManager } from 'FileManager.js';
  import { VoiceManager } from 'VoiceManager.js';

  // Initialize engine
  document.addEventListener('DOMContentLoaded', () => {
    // Set initial autoRead from checkbox
    VoiceManager.autoRead = document.getElementById('autoReadToggle').checked;

    // Initialize Quiz Engine
    QuizEngine.init({ VoiceManager, FileManager });

    // Voice toggle listeners
    document.getElementById('voiceToggle').addEventListener('change', (e) => {
      VoiceManager.enabled = e.target.checked;
      document.getElementById('voiceBtn').disabled = !VoiceManager.enabled;
      document.getElementById('voiceOutput').textContent = VoiceManager.enabled ? "üé§ Voice enabled" : "üîá Voice disabled";
    });

    document.getElementById('autoReadToggle').addEventListener('change', (e) => {
      VoiceManager.autoRead = e.target.checked;
      document.getElementById('voiceOutput').textContent = VoiceManager.autoRead ? "üìù Auto-read enabled" : "üìù Auto-read disabled";
    });

    // Voice button
    document.getElementById('voiceBtn').addEventListener('click', () => {
      if (!VoiceManager.enabled) {
        document.getElementById('voiceOutput').textContent = "‚ö†Ô∏è Voice recognition is off";
        return;
      }
      if (!VoiceManager.recognition) {
        document.getElementById('voiceOutput').textContent = "‚ùå Not supported";
        return;
      }
      document.getElementById('voiceOutput').textContent = "üéôÔ∏è Listening...";
      VoiceManager.recognition.start();
    });
  });
</script>

</body>
</html>




